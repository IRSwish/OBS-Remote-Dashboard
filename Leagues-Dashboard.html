<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Dashboard Leagues</title>
<link rel="stylesheet" href="css/style.css">
<link rel="stylesheet" href="https://unpkg.com/lucide-static/font/lucide.css">
<script src="https://unpkg.com/lucide@latest"></script>
<style>
@font-face {
  font-family: 'GT-America-Regular';
  src: url('css/GT-America-Compressed-Regular-Trial.otf') format('opentype');
  font-style: normal;
}

body,html{
  height:100%;
  margin:0;
  font-family:Inter,system-ui,-apple-system,'Segoe UI',Roboto,'Helvetica Neue',Arial;
  background:linear-gradient(180deg,#0f1720,#07101a);
  color:#fff;
}

.main{display:flex;height:100%;gap:12px;padding:12px}
.sidebar{display:flex;flex-direction:column;width:200px;height:100%}

.league-btn{
  flex:1;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  border:none;
  background:#0b1220;
  border-radius:10px;
  margin:4px 0;
  cursor:pointer;
  overflow:hidden;
  transition:0.2s;
  color:#fff;
  font-family:'GT-America-Regular',sans-serif;
}
.league-btn:hover{
  background:#1a2230;
  transform:scale(1.05);
  box-shadow:0 4px 14px rgba(0,0,0,0.3)
}
.league-btn.active{
  background:linear-gradient(90deg,#00c9ff,#f52584);
  color:#07101a;
  transform:none;
  box-shadow:none
}
.league-btn.active img{filter:brightness(0) invert(1)}
.league-btn img{max-height:60%;max-width:80%;object-fit:contain}
.league-btn span{margin-top:6px;font-size:22px;text-align:center}

.content {
  flex: 1;
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  align-items: flex-start;
  align-content: flex-start;
}
.content.two-cols .panel{flex:1 1 calc(50% - 6px)}
.content.three-cols .panel{flex:1 1 calc(33.33% - 8px)}

.panel{
  background:#0b1220;
  border-radius:10px;
  padding:12px;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:8px;
  overflow:auto;
  opacity:0;
  transform:translateY(20px) scale(0.95);
  transition:opacity 0.5s ease, transform 0.5s ease;
  font-family:Inter,system-ui,-apple-system,'Segoe UI',Roboto,'Helvetica Neue',Arial;
}
.panel.show{
  opacity:1;
  transform:translateY(0) scale(1)
}

.category-title{
  font-size:22px;
  margin-bottom:6px;
  display:flex;
  align-items:center;
  gap:6px;
  justify-content:center;
}

.link-btn{
  display:flex;
  align-items:center;
  gap:6px;
  background:#1a2230;
  padding:6px 12px;
  border-radius:8px;
  color:#fff;
  text-decoration:none;
  transition:0.2s;
  font-family:Inter,system-ui,-apple-system,'Segoe UI',Roboto,'Helvetica Neue',Arial;
  width: 100%;
  box-sizing: border-box;
}
.link-btn img{width:24px;height:24px;object-fit:contain}
.link-btn:hover{background:#284cb8}

.team-btn {
  width: 80px;
  height: 80px;
  border: none;
  background: #0b1220;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition:0.2s;
  color:#fff;
  font-family:'GT-America-Regular',sans-serif;
}
.team-btn img {
  max-width: 70%;
  max-height: 70%;
  object-fit: contain;
}
.team-btn:hover {
  background:#1a2230;
  transform: scale(1.05);
  box-shadow:0 4px 14px rgba(0,0,0,0.3);
}
.team-btn.active {
  background:linear-gradient(90deg,#00c9ff,#f52584);
  color:#07101a;
}

.teams-grid {
  display: grid;
  gap: 12px;
  justify-items: center;
}

.team-links-container {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 8px;
  margin-top: 16px;
  width: 100%;
}
</style>
</head>
<body>
<div class="main">
  <div class="sidebar">
    <button class="league-btn" data-league="EUROPE-MENA"><img src="css/img/EML.png"><span>EUROPE-MENA</span></button>
    <button class="league-btn" data-league="NORTH AMERICA"><img src="css/img/NAL.png"><span>NORTH AMERICA</span></button>
    <button class="league-btn" data-league="SOUTH AMERICA"><img src="css/img/SAL.png"><span>SOUTH AMERICA</span></button>
    <button class="league-btn" data-league="APL - ASIA"><img src="css/img/APL.png"><span>APL - ASIA</span></button>
    <button class="league-btn" data-league="APL - APAC NORTH"><img src="css/img/APL.png"><span>APL - APAC NORTH</span></button>
    <button class="league-btn" data-league="APL - OCEANIA"><img src="css/img/APL.png"><span>APL - OCEANIA</span></button>
    <button class="league-btn" data-league="MUNICH MAJOR"><img src="css/img/MUNICH MAJOR.png"><span>MUNICH MAJOR</span></button>
    <button class="league-btn" data-league="SIX INVITATIONAL 2026"><img src="css/img/SI2026.png"><span>SIX INVITATIONAL 2026</span></button>
  </div>

  <div class="content" id="content"></div>
</div>

<script>
const buttons = document.querySelectorAll('.league-btn');
let leagueData = {};

fetch('links.json')
  .then(res => res.json())
  .then(data => {
    leagueData = data;
    buttons[0].classList.add('active');
    updatePanels(buttons[0].dataset.league);
  });

buttons.forEach(btn=>{
  btn.addEventListener('click',()=>{
    buttons.forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    updatePanels(btn.dataset.league);
  });
});

function updatePanels(league){
  const container = document.getElementById('content');
  container.innerHTML='';
  const categories = Object.keys(leagueData[league]||{});

  container.classList.remove("two-cols","three-cols");
  if(categories.length>=4){
    container.classList.add("three-cols");
  } else if(categories.length>=2){
    container.classList.add("two-cols");
  }

  categories.forEach((cat,i)=>{
    const panel=document.createElement('div');
    panel.className='panel';

    const title=document.createElement('div');
    title.className='category-title';
    title.textContent=cat;
    panel.appendChild(title);

    if (cat === "Teams") {
      const teamsContainer = document.createElement('div');
      teamsContainer.className = "teams-grid";

      const linksContainer = document.createElement('div');
      linksContainer.className = "team-links-container";

      const teams = leagueData[league][cat] || [];

      // calcul des colonnes équilibrées
      const rows = Math.round(Math.sqrt(teams.length));
      let cols = Math.ceil(teams.length / rows);
      // si la dernière ligne serait trop courte, on réduit d'une colonne
      if (teams.length % cols < cols - 1) cols--;

      teamsContainer.style.gridTemplateColumns = `repeat(${cols}, 1fr)`;

      teams.forEach(team=>{
        const btn=document.createElement('button');
        btn.className='team-btn';
        btn.innerHTML=`<img src="${team.img}" alt="${team.text}" title="${team.text}">`;
        teamsContainer.appendChild(btn);

        btn.addEventListener("click", () => {
          teamsContainer.querySelectorAll(".team-btn").forEach(b=>b.classList.remove("active"));
          btn.classList.add("active");

          linksContainer.innerHTML = "";
          (team.links||[]).forEach(link=>{
            const a=document.createElement("a");
            a.href=link.url;
            a.target="_blank";
            a.className="link-btn";
            a.innerHTML=`<img src="${link.img}" alt=""><span>${link.text}</span>`;
            linksContainer.appendChild(a);
          });
        });
      });

      panel.appendChild(teamsContainer);
      panel.appendChild(linksContainer);

    } else {
      (leagueData[league][cat]||[]).forEach(link=>{
        const a=document.createElement('a');
        a.href=link.url;
        a.target='_blank';
        a.className='link-btn';
        a.innerHTML=`<img src="${link.img}" alt="${link.text}"><span>${link.text}</span>`;
        panel.appendChild(a);
      });
    }

    container.appendChild(panel);
    setTimeout(()=>panel.classList.add('show'), i*100);
  });
}
</script>
</body>
</html>
